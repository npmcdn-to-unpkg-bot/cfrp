!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cfrp=e():t.cfrp=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.reaction=e.computed=e.behavior=e.observable=e.event=void 0;var r=i(7),o=n(r),u=i(8),c=n(u),s=i(5),a=n(s),f=i(6),d=n(f),h=i(9),l=n(h);e.event=o.default,e.observable=c.default,e.behavior=a.default,e.computed=d.default,e.reaction=l.default},function(t,e){"use strict";function i(){return++o}function n(t,e){for(var i in t){var n=t[i];void 0!==n&&e(n,i)}}function r(t,e,i){if(!e(t))throw new Error(i)}Object.defineProperty(e,"__esModule",{value:!0}),e.autoId=i,e.eachObj=n,e.check=r;var o=0;e.is={undef:function(t){return null===t||void 0===t},notUndef:function(t){return null!==t&&void 0!==t},"function":function(t){return"function"==typeof t},number:function(t){return"number"==typeof t},array:Array.isArray}},function(t,e,i){"use strict";function n(t){var e=Object.create(o);return e.initSubscribable(t),e}Object.defineProperty(e,"__esModule",{value:!0}),e.SubscribablePrototype=void 0,e.default=n;var r=i(1),o=e.SubscribablePrototype={isSubscribable:function(){return!0},initSubscribable:function(t){this.id=this.id||(0,r.autoId)(),this.name=t,this.derivations={},this.reactions={},this.depsCount=0},addDep:function(t,e){if(!this.completed){var i=e?this.reactions:this.derivations;i[t.id]||(i[t.id]=t,this.depsCount++,this.onAddDep&&this.onAddDep(t))}},removeDep:function(t,e){if(!this.completed){var i=e?this.reactions:this.derivations;i[t.id]&&(i[t.id]=void 0,this.depsCount--,this.onRemoveDep&&this.onRemoveDep(t))}},end:function(){this.completed=!0,this.derivations=null,this.reactions=null,this.depsCount=0,this.onRemoveDep&&this.onRemoveDep()},notifyDirty:function(t){this.completed||((0,r.eachObj)(this.reactions,function(e){return e.onDirty&&e.onDirty(t)}),(0,r.eachObj)(this.derivations,function(e){return e.onDirty&&e.onDirty(t)}))},notifyReady:function(t){this.completed||((0,r.eachObj)(this.reactions,function(e){return e.onReady(t)}),(0,r.eachObj)(this.derivations,function(e){return e.notifyReady(t)}))},notify:function(t){this.completed||(this.notifyDirty(t),this.notifyReady(t))},toString:function(){return"subscribable "+this.name}}},function(t,e){"use strict";function i(t,e){r.push(o),o=e;var i=t();return o=r.pop(),i}function n(t){o&&o(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.track=i,e.registerDep=n;var r=[],o=void 0},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoSubscriberPrototype=void 0;var n=i(1),r=i(3),o=function(t){return function(e){var i=t.sources,n=e.id;e[t.id]=t.trackVersion,i[n]||(i[n]=e,e.addDep(t,t.isReaction))}};e.AutoSubscriberPrototype={isAutoSubscriber:function(){return!0},initAutoSubscriber:function(t){this.id=this.id||(0,n.autoId)(),this.isReaction=t,this.sources={},this.trackVersion=0,this.addSource=o(this)},updateSources:function(){var t=this.sources,e=this.id;for(var i in t){var n=t[i];void 0!==n&&n[e]!==this.trackVersion&&(n.removeDep(this,this.isReaction),n[e]=void 0,t[n.id]=void 0)}},track:function(t){this.trackVersion++;var e=(0,r.track)(t,this.addSource);return this.updateSources(),e},disconnect:function(){var t=this.sources;this.sources={};for(var e in t){var i=t[e];i.removeDep(this,this.isReaction),i[this.id]=void 0}}}},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){function e(e,i){var r=e(t,i);r!==t&&(t=r,n.notify())}function i(){if(u)throw r;return n.completed||(0,s.registerDep)(n),t}var n=(0,c.default)(name),r=void 0,u=void 0;i.pick=function(){if(u)throw r;return t};for(var a=arguments.length,f=Array(a>1?a-1:0),d=1;a>d;d++)f[d-1]=arguments[d];return f.forEach(function(t){var i=o(t,2),c=i[0],s=i[1];c.subscribe({next:function(t){return e(s,t)},complete:n.end,error:function(t){r=t,u=!0,n.notify(),n.end()}})}),i}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var i=[],n=!0,r=!1,o=void 0;try{for(var u,c=t[Symbol.iterator]();!(n=(u=c.next()).done)&&(i.push(u.value),!e||i.length!==e);n=!0);}catch(s){r=!0,o=s}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=r;var u=i(2),c=n(u),s=i(3)},function(t,e,i){"use strict";function n(t,e,i){(0,r.check)(t,r.is.function,"computed: fn argument is not a function");var n=Object.create(a);return n.initComputed(t,e,i),function(){return n.get()}}Object.defineProperty(e,"__esModule",{value:!0}),e.ComputedPrototype=e.CIRCULAR_DEPENDENCY_ERROR=void 0,e.default=n;var r=i(1),o=i(2),u=i(4),c=i(3),s=e.CIRCULAR_DEPENDENCY_ERROR="Detected circular dependency in the computable chain",a=e.ComputedPrototype=Object.assign({},o.SubscribablePrototype,u.AutoSubscriberPrototype,{initComputed:function(t,e,i){var n=this;this.initSubscribable(i),this.initAutoSubscriber(!1),this.fn=e?function(){return t.call(n)}:t},onDirty:function(){this.dirty=!0,this.notifyDirty()},onAddDep:function(){1===this.depsCount&&(this.lastResult=this.track(this.fn))},onRemoveDep:function(){this.depsCount||this.disconnect()},get:function(){if(this.isComputing)throw new Error(s);return(0,c.registerDep)(this),this.isComputing=!0,this.depsCount?this.dirty&&(this.dirty=!1,this.lastResult=this.track(this.fn)):this.lastResult=(0,c.track)(this.fn,null),this.isComputing=!1,this.lastResult}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=(0,c.default)(t);return e.subscribe=function(t){var i=t.next;e.addDep({id:(0,o.autoId)(),onDirty:function(){return e.notifyDirty()},onReady:i},!0)},e.next=function(t){e.notifyReady(t)},e.filter=function(t){var i=r();return i.onDirty=function(e){return t(e)&&i.notifyDirty(e)},i.onReady=function(e){return t(e)&&i.notifyReady(e)},e.addDep(i,!0),i},e.map=function(t){var i=r();return i.onDirty=function(e){return i.notifyDirty(t(e))},i.onReady=function(e){return i.notifyReady(t(e))},e.addDep(i,!0),i},e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var o=i(1),u=i(2),c=n(u)},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){var i=(0,u.default)(e);return{_sub:i,pick:function(){return t},get value(){return(0,c.registerDep)(i),t},set value(e){t!==e&&(t=e,i.notify())},update:function(e){t=e(t)||t,i.notify()}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r;var o=i(2),u=n(o),c=i(3)},function(t,e,i){"use strict";function n(t,e,i){(0,r.check)(t,r.is.function,"reaction: fn argument is not a function");var n=Object.create(u);return n.initReaction(t,e,i),n.subscribe(),function(){return n.unsubscribe()}}Object.defineProperty(e,"__esModule",{value:!0}),e.ReactionPrototype=void 0,e.default=n;var r=i(1),o=i(4),u=e.ReactionPrototype=Object.assign({},o.AutoSubscriberPrototype,{initReaction:function(t,e,i){var n=this;this.name=i,this.initAutoSubscriber(!0),this.action=e?function(){return t.call(n)}:t},onDirty:function(){this.dirty=!0},onReady:function(){this.connected&&this.dirty&&(this.dirty=!1,this.track(this.action))},subscribe:function(){this.connected=!0,this.track(this.action)},unsubscribe:function(){this.connected&&(this.connected=!1,this.disconnect())}})}])});