!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.cfrp=e():t.cfrp=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0}),e.reaction=e.computed=e.observable=void 0;var o=i(6),r=n(o),s=i(5),u=n(s),c=i(7),a=n(c);e.observable=r.default,e.computed=u.default,e.reaction=a.default},function(t,e){"use strict";function i(t,e){o.push(r),r=e;var i=t();return r=o.pop(),i}function n(t){r&&r(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.track=i,e.registerDep=n;var o=[],r=void 0},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoSubscriberPrototype=void 0;var n=i(4),o=i(1),r=function(t){return function(e){var i=t.sources,n=e.id;e[t.id]=t.trackVersion,i[n]||(i[n]=e,e.addDep(t))}};e.AutoSubscriberPrototype={isAutoSubscriber:function(){return!0},initAutoSubscriber:function(t){this.id=this.id||(0,n.autoId)(),this.isReaction=t,this.sources={},this.trackVersion=0,this.addSource=r(this)},updateSources:function(){var t=this.sources,e=this.id;for(var i in t){var n=t[i];void 0!==n&&n[e]!==this.trackVersion&&(n.removeDep(this),n[e]=void 0,t[n.id]=void 0)}},track:function(t){this.trackVersion++;var e=(0,o.track)(t,this.addSource);return this.updateSources(),e},disconnect:function(){var t=this.sources;this.sources={};for(var e in t){var i=t[e];i.removeDep(this),i[this.id]=void 0}}}},function(t,e,i){"use strict";function n(t){var e=Object.create(r);return e.initSubscribable(t),e}Object.defineProperty(e,"__esModule",{value:!0}),e.SubscribablePrototype=void 0,e.default=n;var o=i(4),r=e.SubscribablePrototype={isSubscribable:function(){return!0},initSubscribable:function(t){this.id=this.id||(0,o.autoId)(),this.name=t,this.derivations={},this.reactions={},this.depsCount=0},addDep:function(t){var e=t.isReaction?this.reactions:this.derivations;e[t.id]||(e[t.id]=t,this.depsCount++,this.onAddDep&&this.onAddDep(t))},removeDep:function(t){var e=t.isReaction?this.reactions:this.derivations;e[t.id]&&(e[t.id]=void 0,this.depsCount--,this.onRemoveDep&&this.onRemoveDep(t))},notifyDirty:function(){(0,o.eachObj)(this.reactions,function(t){return t.dirty=!0}),(0,o.eachObj)(this.derivations,function(t){t.dirty=!0,t.notifyDirty()})},notifyReady:function(){(0,o.eachObj)(this.reactions,function(t){return t.onReady()}),(0,o.eachObj)(this.derivations,function(t){return t.notifyReady()})},notify:function(){this.notifyDirty(),this.notifyReady()},toString:function(){return"subscribable "+this.name}}},function(t,e){"use strict";function i(){return++o}function n(t,e){for(var i in t){var n=t[i];void 0!==n&&e(n,i)}}Object.defineProperty(e,"__esModule",{value:!0}),e.autoId=i,e.eachObj=n;var o=0},function(t,e,i){"use strict";function n(t,e,i){var n=Object.create(u);return n.initComputed(t,e,i),function(){return n.get()}}Object.defineProperty(e,"__esModule",{value:!0}),e.ComputedPrototype=void 0,e.default=n;var o=i(3),r=i(2),s=i(1),u=e.ComputedPrototype=Object.assign({},o.SubscribablePrototype,r.AutoSubscriberPrototype,{initComputed:function(t,e,i){var n=this;this.initSubscribable(i),this.initAutoSubscriber(!1),this.fn=e?function(){return t.call(n)}:t},onAddDep:function(){1===this.depsCount&&(this.lastResult=this.track(this.fn))},onRemoveDep:function(){this.depsCount||this.disconnect()},get:function(){return(0,s.registerDep)(this),this.depsCount?this.dirty&&(this.dirty=!1,this.lastResult=this.track(this.fn)):this.lastResult=(0,s.track)(this.fn,null),this.lastResult}})},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){var i=(0,s.default)(e);return{get value(){return(0,u.registerDep)(i),t},set value(e){t!==e&&(t=e,i.notify())},update:function(e){t=e(t)||t,i.notify()}}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=o;var r=i(3),s=n(r),u=i(1)},function(t,e,i){"use strict";function n(t,e,i){var n=Object.create(r);return n.initReaction(t,e,i),n.subscribe(),function(){return n.unsubscribe()}}Object.defineProperty(e,"__esModule",{value:!0}),e.ReactionPrototype=void 0,e.default=n;var o=i(2),r=e.ReactionPrototype=Object.assign({},o.AutoSubscriberPrototype,{initReaction:function(t,e,i){var n=this;this.name=i,this.initAutoSubscriber(!0),this.action=e?function(){return t.call(n)}:t},onReady:function(){this.connected&&this.dirty&&(this.dirty=!1,this.track(this.action))},subscribe:function(){this.connected=!0,this.track(this.action)},unsubscribe:function(){this.connected&&(this.connected=!1,this.disconnect())}})}])});